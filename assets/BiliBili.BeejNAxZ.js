import"./chunks/nprogress.B1y48mDD.js";import{M as z,x as m,K as _,R as $,S as D,a7 as c,a0 as u,a4 as b,a3 as h,a8 as I,aa as O,Y as V}from"./framework.Bz32nx7L.js";const H={class:"bilibili-wrapper"},A={class:"bilibili-desc"},C=["href"],K=["src","title"],M={key:1,class:"loading-icon"},w="https://player.bilibili.com/player.html",Q="accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",U=z({__name:"BiliBili",props:{bvid:{},aid:{},cid:{},title:{default:"A BiliBili video"},page:{default:1},width:{default:"100%"},height:{},ratio:{default:16/9},time:{default:0},autoplay:{type:Boolean,default:!1},lowQuality:{type:Boolean,default:!1},noDanmaku:{type:Boolean,default:!1}},setup(N){const o=N,a=m(),p=m(!1),v=m("auto"),r=_(()=>{const{aid:e,bvid:t,cid:s,autoplay:d,time:R,page:y,lowQuality:E,noDanmaku:x}=o;if(!e&&!t)return null;let f="";const i=new URLSearchParams;if(e&&s)f=w,i.set("aid",String(e)),i.set("cid",String(s)),i.set("p",String(y));else if(t)f=w,i.set("bvid",String(t)),i.set("p",String(y));else return null;return i.set("t",String(R)),i.set("autoplay",d?"1":"0"),E&&i.set("quality","16"),x&&i.set("danmaku","0"),`${f}?${i.toString()}`}),g=e=>{if(typeof e=="number")return`${e}px`;if(typeof e=="string"){if(e.includes("%")||e.includes("px")||e.includes("em")||e.includes("rem"))return e;const t=parseFloat(e);return isNaN(t)?e:`${t}px`}return"100%"},S=_(()=>g(o.width)),k=e=>{if(typeof e=="string"){const[t,s]=e.split(":"),d=Number(t)/Number(s);if(!Number.isNaN(d))return d}return typeof e=="number"?e:16/9},B=e=>{const t=o.height,s=k(o.ratio);return t?g(t):`${Number(e)/s}px`},n=()=>{a.value&&(v.value=B(a.value.clientWidth))},L=()=>{p.value=!0,n()};let l=null;return $(()=>{n(),window.ResizeObserver&&a.value&&(l=new ResizeObserver(n),l.observe(a.value.parentElement)),window.addEventListener("resize",n),window.addEventListener("orientationchange",n)}),D(()=>{l&&l.disconnect(),window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}),(e,t)=>(u(),c("div",H,[b("div",A,[r.value?(u(),c("a",{key:0,class:"sr-only",href:r.value},I(e.title),9,C)):h("v-if",!0)]),r.value?(u(),c("iframe",{key:0,ref_key:"iframeRef",ref:a,src:r.value,title:e.title,class:"bilibili-iframe",allow:Q,style:O({width:S.value,height:p.value?v.value:0}),onLoad:L},null,44,K)):h("v-if",!0),p.value?h("v-if",!0):(u(),c("div",M,t[0]||(t[0]=[b("div",{class:"spinner"},null,-1)])))]))}}),F=V(U,[["__scopeId","data-v-cfc3e35d"]]);export{F as _};
